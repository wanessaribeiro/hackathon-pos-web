{"version":3,"file":"universal.esm.js","sources":["../src/universal/index.ts"],"sourcesContent":["import { MFDataPrefetch } from '../prefetch';\nimport { getScope } from '../common/runtime-utils';\nexport function prefetch(options) {\n    const { id, functionId = 'default' } = options;\n    const mfScope = getScope();\n    const prefetchInstance = MFDataPrefetch.getInstance(mfScope) ||\n        new MFDataPrefetch({\n            name: mfScope,\n        });\n    const res = prefetchInstance.getProjectExports();\n    if (res instanceof Promise) {\n        const promise = res.then(() => {\n            const result = prefetchInstance.prefetch(options);\n            prefetchInstance.memorize(id + functionId, result);\n            return result;\n        });\n        return promise;\n    }\n    else {\n        const result = prefetchInstance.prefetch(options);\n        prefetchInstance.memorize(id + functionId, result);\n        return result;\n    }\n}\n"],"names":["prefetch","options","id","functionId","mfScope","getScope","prefetchInstance","MFDataPrefetch","getInstance","name","res","getProjectExports","Promise","promise","then","result","memorize"],"mappings":";;;AAEO,SAASA,SAASC,OAAO,EAAA;AAC5B,IAAA,MAAM,EAAEC,EAAE,EAAEC,UAAa,GAAA,SAAS,EAAE,GAAGF,OAAAA;AACvC,IAAA,MAAMG,OAAUC,GAAAA,QAAAA,EAAAA;AAChB,IAAA,MAAMC,mBAAmBC,cAAeC,CAAAA,WAAW,CAACJ,OAAAA,CAAAA,IAChD,IAAIG,cAAe,CAAA;QACfE,IAAML,EAAAA;AACV,KAAA,CAAA;IACJ,MAAMM,GAAAA,GAAMJ,iBAAiBK,iBAAiB,EAAA;AAC9C,IAAA,IAAID,eAAeE,OAAS,EAAA;QACxB,MAAMC,OAAAA,GAAUH,GAAII,CAAAA,IAAI,CAAC,IAAA;YACrB,MAAMC,MAAAA,GAAST,gBAAiBN,CAAAA,QAAQ,CAACC,OAAAA,CAAAA;YACzCK,gBAAiBU,CAAAA,QAAQ,CAACd,EAAAA,GAAKC,UAAYY,EAAAA,MAAAA,CAAAA;YAC3C,OAAOA,MAAAA;AACX,SAAA,CAAA;QACA,OAAOF,OAAAA;KAEN,MAAA;QACD,MAAME,MAAAA,GAAST,gBAAiBN,CAAAA,QAAQ,CAACC,OAAAA,CAAAA;QACzCK,gBAAiBU,CAAAA,QAAQ,CAACd,EAAAA,GAAKC,UAAYY,EAAAA,MAAAA,CAAAA;QAC3C,OAAOA,MAAAA;AACX;AACJ;;;;"}